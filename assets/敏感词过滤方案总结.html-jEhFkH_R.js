import{_ as p}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as o,o as e,c,a as n,b as s,e as i,d as a}from"./app-AuAuVshg.js";const u="/assets/敏感词过滤1-eXB_pOzl.png",l="/assets/敏感词过滤2-rzM9-MxB.png",r="/assets/敏感词过滤3-Nj7DALa6.png",k="/assets/敏感词过滤4-dONMqH0X.png",d={},m=a('<p>系统需要对用户输入的文本进行敏感词过滤如色情、政治、暴力相关的词汇。</p><p>敏感词过滤用的使用比较多的 <strong>Trie 树算法</strong> 和 <strong>DFA 算法</strong>。</p><h2 id="算法实现" tabindex="-1"><a class="header-anchor" href="#算法实现" aria-hidden="true">#</a> 算法实现</h2><h3 id="trie-树" tabindex="-1"><a class="header-anchor" href="#trie-树" aria-hidden="true">#</a> Trie 树</h3><p><strong>Trie 树</strong> 也称为字典树、单词查找树，哈系树的一种变种，通常被用于字符串匹配，用来解决在一组字符串集合中快速查找某个字符串的问题。像浏览器搜索的关键词提示一般就是基于 Trie 树来做的。</p><figure><img src="'+u+'" alt="brower-trie" tabindex="0" loading="lazy"><figcaption>brower-trie</figcaption></figure><p>假如我们的敏感词库中有以下敏感词：</p><ul><li><p>高清有码</p></li><li><p>高清 AV</p></li><li><p>东京冷</p></li><li><p>东京热</p></li></ul><p>我们构造出来的敏感词 Trie 树就是下面这样的：</p><figure><img src="'+l+'" alt="trie" tabindex="0" loading="lazy"><figcaption>trie</figcaption></figure><p>当我们要查找对应的字符串&quot;东京热&quot;的话，我们会把这个字符串切割成单个的字符&quot;东&quot;、&quot;京&quot;、&quot;热&quot;，然后我们从 Trie 树的根节点开始匹配。</p><p>可以看出， <strong>Trie 树的核心原理其实很简单，就是通过公共前缀来提高字符串匹配效率。</strong></p><p>Apache Commons Collecions 这个库中就有 Trie 树实现：</p><figure><img src="'+r+`" alt="common-collections-trie" tabindex="0" loading="lazy"><figcaption>common-collections-trie</figcaption></figure><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">Trie</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> trie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PatriciaTrie</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
trie<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;Abigail&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
trie<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;Abi&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;doctor&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
trie<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;Annabel&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;teacher&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
trie<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;Christina&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
trie<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;Chris&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;doctor&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertTrue</span><span class="token punctuation">(</span>trie<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span><span class="token string">&quot;Abigail&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;{Abi=doctor, Abigail=student}&quot;</span><span class="token punctuation">,</span>
trie<span class="token punctuation">.</span><span class="token function">prefixMap</span><span class="token punctuation">(</span><span class="token string">&quot;Abi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">&quot;{Chris=doctor, Christina=student}&quot;</span><span class="token punctuation">,</span> trie<span class="token punctuation">.</span><span class="token function">prefixMap</span><span class="token punctuation">(</span><span class="token string">&quot;Chr&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Aho-Corasick（AC）自动机是一种建立在 Trie 树上的一种改进算法，是一种多模式匹配算法，由贝尔实验室的研究人员 Alfred V. Aho 和 Margaret J.Corasick 发明。</p><p>AC 自动机算法使用 Trie 树来存放模式串的前缀，通过失败匹配指针（失配指针）来处理匹配失败的跳转。</p><p>相关阅读：地铁十分钟 | AC 自动机</p><h3 id="dfa" tabindex="-1"><a class="header-anchor" href="#dfa" aria-hidden="true">#</a> DFA</h3><p><strong>DFA</strong>（Deterministic Finite Automata)即确定有穷自动机，与之对应的是 NFA（Non-Deterministic Finite Automata，有穷自动机)。</p><p>关于 DFA 的详细介绍可以看这篇文章：有穷自动机 DFA&amp;NFA (学习笔记) - 小蜗牛的文章 - 知乎 。</p>`,21),g={href:"https://hutool.cn/docs/##/dfa/%E6%A6%82%E8%BF%B0",target:"_blank",rel:"noopener noreferrer"},v=a('<figure><img src="'+k+`" alt="hutool-dfa" tabindex="0" loading="lazy"><figcaption>hutool-dfa</figcaption></figure><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">WordTree</span> wordTree <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WordTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

wordTree<span class="token punctuation">.</span><span class="token function">addWord</span><span class="token punctuation">(</span><span class="token string">&quot;大&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

wordTree<span class="token punctuation">.</span><span class="token function">addWord</span><span class="token punctuation">(</span><span class="token string">&quot;大憨憨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

wordTree<span class="token punctuation">.</span><span class="token function">addWord</span><span class="token punctuation">(</span><span class="token string">&quot;憨憨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> text <span class="token operator">=</span> <span class="token string">&quot;那人真是个大憨憨！&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 获得第一个匹配的关键字</span>
<span class="token class-name">String</span> matchStr <span class="token operator">=</span> wordTree<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>matchStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 标准匹配，匹配到最短关键词，并跳过已经匹配的关键词</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> matchStrList <span class="token operator">=</span> wordTree<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>matchStrList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 匹配到最长关键词，跳过已经匹配的关键词List&lt;String&gt;</span>
matchStrList2 <span class="token operator">=</span> wordTree<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span>text<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>matchStrList2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>输出：</p><p>大</p><p>[大, 憨憨]</p><p>[大, 大憨憨]</p><h2 id="开源项目" tabindex="-1"><a class="header-anchor" href="#开源项目" aria-hidden="true">#</a> 开源项目</h2><ul><li><p>ToolGood.Words ：一款高性能敏感词(非法词/脏字)检测过滤组件，附带繁体简体互换，支持全角半角互换，汉字转拼音，模糊搜索等功能。</p></li><li><p>sensitive-words-filter ：敏感词过滤项目，提供 TTMP、DFA、DAT、hash bucket、Tire 算法支持过滤。可以支持文本的高亮、过滤、判词、替换的接口支持。</p></li></ul><h2 id="论文" tabindex="-1"><a class="header-anchor" href="#论文" aria-hidden="true">#</a> 论文</h2><ul><li><p>一种敏感词自动过滤管理系统</p></li><li><p>一种网络游戏中敏感词过滤方法及系统</p></li></ul>`,10);function f(h,b){const t=o("ExternalLinkIcon");return e(),c("div",null,[m,n("p",null,[n("a",g,[s("Hutool"),i(t)]),s(" 提供了 DFA 算法的实现：")]),v])}const A=p(d,[["render",f],["__file","敏感词过滤方案总结.html.vue"]]);export{A as default};
