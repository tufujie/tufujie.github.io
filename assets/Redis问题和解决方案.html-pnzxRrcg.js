import{_ as a}from"./plugin-vue_export-helper-x3n3nnut.js";import{o as e,c as i,d as h}from"./app-AuAuVshg.js";const r={},d=h('<h2 id="缓存雪崩" tabindex="-1"><a class="header-anchor" href="#缓存雪崩" aria-hidden="true">#</a> 缓存雪崩</h2><h3 id="定义" tabindex="-1"><a class="header-anchor" href="#定义" aria-hidden="true">#</a> 定义</h3><p>缓存在同一个时间大量过期，导致大量的请求到了数据库，导致数据库崩溃</p><h3 id="产生原因" tabindex="-1"><a class="header-anchor" href="#产生原因" aria-hidden="true">#</a> 产生原因</h3><p>设置了相同的过期时间</p><h3 id="解决方案" tabindex="-1"><a class="header-anchor" href="#解决方案" aria-hidden="true">#</a> 解决方案</h3><ol><li><p>设置随机的过期时间</p><ol><li>设置过期时间为几分钟</li></ol></li><li><p>使用互斥锁，但是影响并发量</p></li><li><p>缓存不设置过期时间</p><ol><li>会产生脏数据，解决方式是活动全部结束时清除数据。</li></ol></li></ol><h2 id="缓存穿透" tabindex="-1"><a class="header-anchor" href="#缓存穿透" aria-hidden="true">#</a> 缓存穿透</h2><h3 id="定义-1" tabindex="-1"><a class="header-anchor" href="#定义-1" aria-hidden="true">#</a> 定义</h3><p>请求id不存在，导致请求到了数据库</p><h3 id="解决方案-1" tabindex="-1"><a class="header-anchor" href="#解决方案-1" aria-hidden="true">#</a> 解决方案</h3><ol><li><p>参数校验</p></li><li><p>不存在的key也加入缓存，设置几分钟的过期时间</p><ol><li>这是临时解决方案，需要明确具体的原因，如果是恶意访问要在网关层限制IP访问</li></ol></li><li><p>使用布隆过滤器</p></li></ol><h2 id="缓存击穿" tabindex="-1"><a class="header-anchor" href="#缓存击穿" aria-hidden="true">#</a> 缓存击穿</h2><h3 id="定义-2" tabindex="-1"><a class="header-anchor" href="#定义-2" aria-hidden="true">#</a> 定义</h3><p>热点数据缓存key失效，导致请求落到了数据库，数据库被击溃</p><h3 id="产生原因-1" tabindex="-1"><a class="header-anchor" href="#产生原因-1" aria-hidden="true">#</a> 产生原因</h3><ol><li>设置错了过期时间 <ol><li>热点key是否需要过期，如果要过期，多久过期</li></ol></li><li>被误删除</li></ol><h3 id="解决方案-2" tabindex="-1"><a class="header-anchor" href="#解决方案-2" aria-hidden="true">#</a> 解决方案</h3><ol><li>代码CR</li><li>线上执行脚本流程和权限控制</li></ol>',19),l=[d];function n(o,t){return e(),i("div",null,l)}const p=a(r,[["render",n],["__file","Redis问题和解决方案.html.vue"]]);export{p as default};
